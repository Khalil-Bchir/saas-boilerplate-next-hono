# Monorepo environment template
# ---------------------------------------------------------------------------
# Copy this file to an environment-specific file depending on NODE_ENV:
#   - .env.development
#   - .env.staging
#   - .env.production
#
# The API app (`apps/api`) loads `.env.${NODE_ENV}` from the repo root.
# The web app (`apps/web`) reads NEXT_PUBLIC_* variables from your Next.js env
# file (e.g. `.env.local` in development, or deployment env vars in production).
#
# IMPORTANT:
# - Never commit real secrets to git.
# - This file is only a reference; leave values empty or use obvious placeholders.

# ---------------------------------------------------------------------------
# Core
# ---------------------------------------------------------------------------

# One of: development | staging | production
NODE_ENV=development

# API server port (e.g. 3000)
PORT=3000

# Public API base URL for the backend (no trailing slash).
# Required in staging/production, optional in development.
API_URL=http://localhost:3000

# Public web app URL (no trailing slash).
# Required in staging/production, optional in development.
WEB_URL=http://localhost:3001

# Comma-separated list of allowed CORS origins.
# Required in staging/production, optional in development.
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ---------------------------------------------------------------------------
# Database (Supabase via Prisma)
# ---------------------------------------------------------------------------

# Primary database connection string (used by Prisma and the API).
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/postgres

# Direct database connection string for migrations.
DIRECT_URL=postgresql://postgres:postgres@localhost:5432/postgres

# ---------------------------------------------------------------------------
# Supabase Auth / Storage
# ---------------------------------------------------------------------------

# Supabase project URL (e.g. https://xyzcompany.supabase.co)
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase anon/public key (safe to use in frontend, but still treat as secret).
SUPABASE_ANON_KEY=ey_example_anon_key_change_me

# Supabase service role key (SERVER ONLY - do NOT expose to frontend).
SUPABASE_SERVICE_ROLE_KEY=ey_example_service_role_key_change_me

# Supabase auth email confirmation redirect URL.
SUPABASE_EMAIL_REDIRECT_URL=http://localhost:3001/auth/verify

# Supabase password reset redirect URL.
SUPABASE_RESET_REDIRECT_URL=http://localhost:3001/auth/reset-password

# Supabase OAuth redirect URL.
SUPABASE_OAUTH_REDIRECT_URL=http://localhost:3001/auth/callback

# ---------------------------------------------------------------------------
# Security
# ---------------------------------------------------------------------------

# JWT signing secret for API tokens.
JWT_SECRET=change_me_jwt_secret

# Secret used for signing/encrypting cookies.
COOKIE_SECRET=change_me_cookie_secret

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Prisma config
PRISMA_ENGINES_CHECKSUM_IGNORE_MISSING=1
PRISMA_ENGINES_MIRROR=https://registry.npmmirror.com/-/binary/prisma

# ---------------------------------------------------------------------------
# Web app (Next.js) - public env vars
# ---------------------------------------------------------------------------
# These should be defined where your Next.js app reads env vars
# (e.g. .env.local in development, or your deployment environment).

# Base URL of the API as seen from the browser (no trailing slash).
NEXT_PUBLIC_API_URL=http://localhost:3000

# LocalStorage key for auth state (must be unique per app/deployment).
NEXT_PUBLIC_APP_AUTH_STORAGE_KEY=saas.auth

# LocalStorage key for user preferences (must be unique per app/deployment).
NEXT_PUBLIC_APP_PREFERENCES_STORAGE_KEY=saas.preferences

# Default theme for the app UI.
# One of: light | dark | system
NEXT_PUBLIC_DEFAULT_THEME=system

# Default user role selected on sign-up.
# Must match @repo/types UserRole: USER | ADMIN | DEMO
NEXT_PUBLIC_DEFAULT_SIGNUP_ROLE=USER